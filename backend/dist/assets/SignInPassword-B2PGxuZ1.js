import{_ as y,j as x,d as u,e as k,B as p,x as I,o as b,h as B,i as n,k as f,a as l,b as g,q as S,l as C,y as M,z as N,A as V,p as T}from"./index-Dl1616DY.js";import $ from"./AuthenticationLayout-DO1oYryL.js";const q=["label"],K=["value"],P=["error","error-text"],j={class:"auth-form-suggest"},z={class:"auth-form-action"},A=["disabled"],D={__name:"SignInPassword",props:{id:String},setup(w){const{id:v}=w,_=x(),a=u(!1),s=u({}),c=u("");k(async()=>{if(v){try{a.value=!0;const t=await p.getById(v);s.value=t.data}catch(t){console.log(t)}a.value=!1}else console.log("No id")});const m=u("");async function h(){var t,o,i;try{a.value=!0;const e=await p.signIn({email:(t=s.value)==null?void 0:t.email,password:c.value}),{id:r}=e.data,d=await p.getById(r);localStorage.setItem("user",JSON.stringify(d.data)),_.push({name:"home"})}catch(e){console.log(e),m.value=((i=(o=e.response)==null?void 0:o.data)==null?void 0:i.message)||"Đã có lỗi xảy ra",a.value=!1}a.value=!1}return(t,o)=>{const i=I("router-link");return b(),B($,{loading:a.value},{title:n(()=>[f("Chào mừng")]),greeting:n(()=>{var e;return[l("md-assist-chip",{class:"chip",label:(e=s.value)!=null&&e.email?s.value.email:"",onClick:o[0]||(o[0]=r=>{var d;return C(_).push({name:"sign-in-email",props:{email:(d=s.value)!=null&&d.email?s.value.email:""}})})},[g(S,{slot:"icon",style:"filled"},{default:n(()=>[f("account_circle")]),_:1})],8,q)]}),form:n(()=>{var e;return[l("input",{type:"hidden",class:"auth-form-text-field",name:"email",value:(e=s.value)==null?void 0:e.email},null,8,K),M(l("md-outlined-text-field",{class:"auth-form-text-field",type:"password",label:"Mật khẩu",name:"password","onUpdate:modelValue":o[1]||(o[1]=r=>c.value=r),onKeyup:V(h,["enter"]),error:m.value&&!a.value?!0:void 0,"error-text":m.value,autocomplete:"new-password"},null,40,P),[[N,c.value]]),l("div",j,[g(i,{to:"/"},{default:n(()=>[f("Bạn quên mật khẩu?")]),_:1})]),l("div",z,[l("md-filled-button",{disabled:a.value?"disabled":void 0,onClick:T(h,["prevent"])},"Tiếp theo",8,A)])]}),_:1},8,["loading"])}}},R=y(D,[["__scopeId","data-v-0a1d935f"]]);export{R as default};
